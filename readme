# VNR OutPass Application

A full-stack Gate Pass Management System for VNRVJIET students and faculty. This project supports role-based access (Student, Mentor, HOD, Security), Google OAuth login, session-based authentication using cookies, and scalable database relationships via PostgreSQL and Prisma.

---

## âœ… Tech Stack

### Frontend:

* React + Vite
* TypeScript
* REST Client (for API testing)

### Backend:

* Node.js + Express
* TypeScript
* Prisma ORM
* PostgreSQL (NeonDB recommended)

### Auth:

* Google OAuth2
* JWT + HttpOnly Cookies

---

## ğŸ“¦ Install & Run

### 1. Clone the Repo

```bash
git clone https://github.com/yourusername/vnr-outpass.git
cd vnr-outpass
```

### 2. Install Dependencies

```bash
# From root
cd backend && npm install
cd ../frontend && npm install
```

### 3. Set Up Environment Variables

Create a `.env` file in `backend/`:

```
PORT=4000
GOOGLE_CLIENT_ID=your-client-id
JWT_SECRET=your-very-secret-string
JWT_EXPIRES_IN=7d
DATABASE_URL=your-postgres-url
COOKIE_NAME=gatepass_token
```

### 4. Setup Prisma & Database

```bash
cd backend
npx prisma generate
npx prisma migrate dev --name init
npx ts-node prisma/seed.ts
```

> âš ï¸ Re-run `npx prisma generate` if schema changes
âš ï¸ Important Notes
You only need to run 'migrate dev' once per migration.
If you're not sure â€” run 'npx prisma migrate status' to check if you're behind.
Always follow it up with:
npx prisma generate

### 5. Start the App

```bash
# Backend
cd backend
npm run dev

# Frontend
cd frontend
npm run dev
```

Visit: `http://localhost:5173`

---

## ğŸ§ª Testing APIs (using REST Client)

Use `test.http` file in the root to:

* Login via `idToken`
* Apply for Gate Pass
* View Mentor Requests
* Approve/Reject Pass
* Security scan & verify

---

## ğŸ“ Important Files Overview

```
vnr-outpass/
â”œâ”€â”€ backend/
â”‚   â”œâ”€â”€ prisma/
â”‚   â”‚   â””â”€â”€ schema.prisma         # Prisma DB schema
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ index.ts              # Main Express server
â”‚   â”‚   â”œâ”€â”€ auth.ts               # Auth logic (JWT, middleware)
â”‚   â”‚   â”œâ”€â”€ config.ts             # ENV vars and constants
â”‚   â”‚   â””â”€â”€ scripts/seed.ts       # Initial user/mentor mapping
â”‚   â””â”€â”€ .env                      # Secrets and DB config
â”‚
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ App.tsx               # Handles role-based UI
â”‚   â”‚   â””â”€â”€ components/
â”‚   â”‚       â””â”€â”€ LoginButton.tsx   # Google login button logic
â”‚
â””â”€â”€ test.http                     # Manual test cases
```


## ğŸ”œ Pending To-Do

* [ ] âœ… Frontend: Build separate pages per role

  * [ ] `Student`: Apply form + status history
  * [ ] `Mentor`: Dashboard to approve/reject requests
  * [ ] `Security`: QR Scanner UI + validation feedback
  * [ ] `HOD`: Escalation approval panel
* [ ] âœ… Setup proper routing/navigation (React Router)
* [ ] ğŸ” Protect frontend routes based on session & role
* [ ] ğŸ”„ Implement auto-refresh for new gate pass requests
* [ ] ğŸ“· (Optional) Capture/display student photo
* [ ] ğŸ“¦ Switch to production backend DB when deploying
* [ ] ğŸ“ˆ Improve UI/UX (Tailwind + cleaner layout)
* [ ] ğŸ“² Add notifications (Email / WhatsApp - optional)
* [ ] ğŸ“ Import actual student-mentor mappings via CSV
* [ ] ğŸ§ª Add unit tests (backend + auth)
* [ ] ğŸš€ Deployment scripts (Fly.io / Vercel / Railway)

---

## ğŸ‘¥ Seeded Accounts

| Role     | Email                                                   | Notes         |
| -------- | ------------------------------------------------------- | ------------- |
| Mentor   | [aveenonights@gmail.com](mailto:aveenonights@gmail.com) | Sample Mentor |
| Student  | [22071a0508@vnrvjiet.in](mailto:22071a0508@vnrvjiet.in) | Sample User   |
| Security | [guard@vnrsecurity.com](mailto:guard@vnrsecurity.com)   | Gate Scanner  |

---

good luck lamavo if u are reading this